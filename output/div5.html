<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>5 Divisioona S11 - generoitu 2025-08-30 18:07</title>
<style>
:root{
  --fg:#f5f5f5;
  --muted:#aaa;
  --border:#444;
  --bg:#1b1b1b;
  --table-bg:#222;
  --table-alt:#2a2a2a;
  --head:#333;
  --chip-bg:#2a2a2a;
  --nav-bg:#2a2a2a;
  --accent:#4ade80;
}
html,body{height:100%;}
body{ margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif; font-size:18px; line-height:1.45; color:var(--fg); background:var(--bg); }
.page{ max-width:1400px; margin:0 auto; padding:1.25rem 1.25rem 3rem; }
h1{ font-size:2rem; margin:.5rem 0 1rem; }
h2{ font-size:1.5rem; margin:1.25rem 0 .5rem; }
h3{ font-size:1.15rem; margin:1rem 0 .5rem; }
.nav{ display:flex; flex-wrap:wrap; gap:.75rem; margin:.25rem 0 1rem; }
.nav a{ color:#cfe1ff; text-decoration:none; border:1px solid var(--border); padding:.25rem .5rem; border-radius:999px; background:var(--nav-bg); }
.nav a:hover{ background:#3a3a3a; }
.chips{ display:flex; gap:.5rem; flex-wrap:wrap; margin:.25rem 0 .75rem 0; }
.chip{ font-size:.95rem; padding:.35rem .65rem; border-radius:999px; background:var(--chip-bg); border:1px solid var(--border); color:var(--fg); }

table{ width:100%; border-collapse:collapse; margin:.5rem 0 1rem; background:var(--table-bg); }
thead th{ position:sticky; top:0; background:var(--head); border-bottom:1px solid var(--border); font-weight:600; color:var(--fg); }
th,td{ padding:.55rem .7rem; border-bottom:1px solid var(--border); }
tbody tr:nth-child(even){ background:var(--table-alt); }
th,td{ text-align:center; }
th:first-child,td:first-child{ text-align:left; }
td:first-child,th:first-child{ position:sticky; left:0; z-index:1; background:var(--table-bg); }
tbody tr:hover{ outline:1px solid #555; background:#292929; }

.bar{ position:relative; background:#333; height:20px; border-radius:8px; overflow:hidden; }
.bar>span{ position:absolute; left:0; top:0; bottom:0; width:0%; background:var(--accent); }
.bar .val{ position:relative; z-index:1; font-size:.9rem; padding-left:.5rem; color:#fff; }

/* Split WR bar (win + loss) */
.bar-split{position:relative;height:20px;border-radius:6px;overflow:hidden;background:#333}
.bar-split .win{position:absolute;left:0;top:0;bottom:0;background:#22c55e}
.bar-split .loss{position:absolute;top:0;bottom:0;background:#ef4444}
.bar-split .val{position:relative;z-index:1;text-align:center;line-height:20px;font-size:.85rem;color:#fff}


.cell-grad.good{ background:linear-gradient(90deg, rgba(34,197,94,.25), transparent); }
.cell-grad.bad{  background:linear-gradient(90deg, rgba(239,68,68,.25), transparent); }
.cell-muted{ color:var(--muted); }
th[title]{ text-decoration: underline dotted #777; text-underline-offset:3px; cursor:help; }

.team-section{ padding:.25rem 0 1.25rem; border-top:1px solid var(--border); margin-top:1rem; }
.muted{ color:var(--muted); font-size:.95rem; margin:.25rem 0 1rem; }

.toolbar{ display:flex; gap:.75rem; align-items:center; margin:.4rem 0 .5rem; flex-wrap:wrap; }
details.cols summary{ cursor:pointer; }
details.cols div{ display:flex; gap:.75rem; flex-wrap:wrap; padding:.5rem 0; }

.tabs{ margin:.75rem 0 1rem; }
.tab-nav{ display:flex; gap:.5rem; }
.tab-btn{ background:var(--chip-bg); color:var(--fg); border:1px solid var(--border); padding:.35rem .7rem; border-radius:999px; cursor:pointer; }
.tab-btn.active{ background:#3a3a3a; }
.tab-panel{ display:none; }
.tab-panel.active{ display:block; }

.logo{ height:130px; width:130px; object-fit:cover; vertical-align:middle; border-radius:4px; margin-right:.5rem; background:#111; border:1px solid var(--border); }
.nav .logo{ height:35px; width:35px; margin-right:.4rem; }

.div-summary{ display:grid; grid-template-columns:1.2fr 1fr; gap:1rem; margin:.75rem 0 1rem; }
.div-summary .card{ background:var(--table-bg); border:1px solid var(--border); border-radius:8px; padding:.75rem .9rem; }
.summary-grid{ display:grid; grid-template-columns:repeat(4,minmax(0,1fr)); gap:.6rem; }
.summary-item{ background:var(--table-alt); border:1px solid var(--border); border-radius:6px; padding:.5rem .6rem; text-align:center; }
.summary-item .label{ color:var(--muted); font-size:.9rem; }
.summary-item .val{ font-size:1.15rem; font-weight:600; }
.leaders table{ width:100%; border-collapse:collapse; }
.leaders th,.leaders td{ padding:.35rem .5rem; border-bottom:1px solid var(--border); text-align:left; }
.leaders th{ color:var(--muted); font-weight:600; }

@media print{
  body{ background:#fff; color:#000; }
  .page{ max-width:100%; padding:0; }
  .nav,.toolbar{ display:none; }
  .bar{ height:12px; }
}
</style>

<script>
function sortTable(tableId,n,numeric){
  const table=document.getElementById(tableId);
  const dirAttr=table.getAttribute('data-sort-dir')||'asc';
  const dir=dirAttr==='asc'?1:-1;
  let rows=Array.from(table.tBodies[0].rows);
  rows.sort((a,b)=>{
    const x=a.cells[n].textContent.trim(); const y=b.cells[n].textContent.trim();
    if(numeric){
      const nx=parseFloat(x.replace(',','.'))||0; const ny=parseFloat(y.replace(',','.'))||0;
      return (nx-ny)*dir;
    }
    return x.localeCompare(y)*dir;
  });
  table.tBodies[0].append(...rows);
  table.setAttribute('data-sort-dir', dirAttr==='asc'?'desc':'asc');
}
function applyDefaultSort(tableId){
  const t=document.getElementById(tableId); if(!t) return;
  const col=parseInt(t.getAttribute('data-sort-col')||'0',10);
  const dir=(t.getAttribute('data-sort-dir')||'asc')==='asc';
  sortTable(tableId,col,!dir); sortTable(tableId,col,dir);
}
function renderBar(cell,value){
  cell.innerHTML='<div class="bar"><span></span><div class="val"></div></div>';
  const span=cell.querySelector('.bar > span'); const val=cell.querySelector('.bar .val');
  val.textContent=(isFinite(value)?value.toFixed(1):0)+'%';
  const width=Math.max(0,Math.min(100,value)); span.style.width=width+'%';
  const g=Math.round(120*(width/100)); const r=Math.round(180*(1-width/100))+60;
  span.style.background=`rgb(${r},${g+80},100)`;
}
function bindPlayedOnly(tableId,chkId){
  const chk=document.getElementById(chkId); const t=document.getElementById(tableId);
  if(!chk||!t) return; const colPlayed=1;
  chk.addEventListener('change',()=>{ for(const tr of t.tBodies[0].rows){ const played=parseInt(tr.cells[colPlayed].textContent||'0',10); tr.style.display=(chk.checked&&!played)?'none':''; }});
}
/* p25–p50–p75 liuku: punainen→vihreä */
function colorizeContinuous(tableId,colIdx,p25,p50,p75,inverse=false){
  const t=document.getElementById(tableId); if(!t||!t.tBodies.length) return;
  const rows=t.tBodies[0].rows;
  for(const tr of rows){
    const td=tr.cells[colIdx]; let v=parseFloat((td.textContent||'').replace(',','.'));
    if(!isFinite(v)){ td.classList.add('cell-muted'); continue; }
    let ratio; if(v<=p25) ratio=0; else if(v>=p75) ratio=1; else ratio=(v-p25)/(p75-p25||1);
    if(inverse) ratio=1-ratio;
    const r=Math.round(240*(1-ratio)); const g=Math.round(220*ratio); td.style.background=`rgba(${r},${g},0,0.28)`;
  }
}
function postProcessTable(tableId,opts){
  const t=document.getElementById(tableId); if(!t||!t.tBodies.length) return;
  const rows=t.tBodies[0].rows;
  if(opts.bars){
    for(const tr of rows){
      const played=parseInt(tr.cells[1].textContent||'0',10);
      opts.bars.forEach(i=>{
        const num=parseFloat((tr.cells[i].textContent||'').replace(',','.'));
        renderBar(tr.cells[i], isFinite(num)?num:0);
        const span=tr.cells[i].querySelector('.bar > span'); if(span) span.style.opacity=Math.max(.35,Math.min(1,Math.sqrt(played)/2));
      });
    }
  }
  if (opts.wrbars){
    for (const tr of rows){
      opts.wrbars.forEach(i => {
        const td = tr.cells[i];
        if (!td || !td.classList.contains('wr')) return;

        const g   = parseInt(td.dataset.g || '0', 10);        // games played
        const w   = parseInt(td.dataset.w || '0', 10);        // wins
        const pctAttr = parseFloat((td.dataset.pct || '').replace(',','.'));
        const pct = isFinite(pctAttr) ? pctAttr : (g ? (100*w/g) : 0);

        if (!g) {
          // Pelaajataulukot: näytä 0–0 (0%) harmaana, jos data-zero="show"
          if (td.dataset.zero === 'show') {
            td.innerHTML = '<div class="bar-split"><span class="win"></span><span class="loss"></span><div class="val"></div></div>';
            const val = td.querySelector('.val');
            val.textContent = '0–0 (0%)';
            td.querySelector('.win').style.width  = '0%';
            td.querySelector('.loss').style.left  = '0%';
            td.querySelector('.loss').style.width = '100%';
            td.querySelector('.win').style.background  = '#555';  // neutraali harmaa
            td.querySelector('.loss').style.background = '#555';  // neutraali harmaa
            td.classList.add('cell-muted');
            td.title = 'No attempts';
          } else {
            // Karttataulukot: pidä "not played"
            td.textContent = 'not played';
            td.classList.add('cell-muted');
            td.title = 'No games';
          }
          return;
        }

        renderSplitWR(td, g, pct);  // piirtää vihreä/punainen -splitin
      });
    }
  }

  if(opts.color){ opts.color.forEach(c=>colorizeContinuous(tableId,c.col,c.p[0],c.p[1],c.p[2],c.inverse||false)); }
  if(opts.defaultSort){ sortTable(tableId,opts.defaultSort.col,opts.defaultSort.dir==='asc'); }
  if(opts.toggles) buildColumnToggles(tableId);
}
function buildColumnToggles(tableId){
  const t=document.getElementById(tableId);
  const host=document.querySelector(`details.cols div[data-for="${tableId}"]`);
  if(!t||!host) return; const ths=[...t.tHead.rows[0].cells];
  ths.forEach((th,idx)=>{
    const id=`${tableId}-col-${idx}`; const wrap=document.createElement('label');
    wrap.innerHTML=`<input type="checkbox" id="${id}" checked> ${th.textContent}`;
    host.appendChild(wrap);
    wrap.querySelector('input').addEventListener('change',(e)=>{
      const on=e.target.checked; th.style.display=on?'':'none';
      for(const tr of t.tBodies[0].rows){ tr.cells[idx].style.display=on?'':'none'; }
    });
  });
}
function switchTab(containerId,tabName){
  const root=document.getElementById(containerId); if(!root) return;
  const panels=root.querySelectorAll('.tab-panel'); const buttons=root.querySelectorAll('.tab-btn');
  panels.forEach(p=>p.classList.remove('active')); buttons.forEach(b=>b.classList.remove('active'));
  root.querySelector(`[data-tab="${tabName}"]`)?.classList.add('active');
  root.querySelector(`[data-target="${tabName}"]`)?.classList.add('active');
  initTabsAutoSort(containerId);
}
function initTabsAutoSort(rootId){
  const root=document.getElementById(rootId); if(!root) return;
  const activePanel=root.querySelector('.tab-panel.active'); if(!activePanel) return;
  const table=activePanel.querySelector('table'); if(!table) return;
  table.setAttribute('data-sort-col','0'); table.setAttribute('data-sort-dir','desc');
  sortTable(table.id,0,false); sortTable(table.id,0,false);
}
function renderWRCell(td){
  const w = parseInt(td.dataset.w || '0', 10);    // wins
  const g = parseInt(td.dataset.g || '0', 10);    // games
  const l = Math.max(0, g - w);                   // losses
  const pctAttr = parseFloat((td.dataset.pct || '').replace(',','.'));
  const pct = isFinite(pctAttr) ? pctAttr : (g ? (100*w/g) : 0);

  td.innerHTML = '<div class="bar"><span></span><div class="val"></div></div>';
  const span = td.querySelector('.bar > span');
  const val  = td.querySelector('.bar .val');

  // palkin leveys
  const wPct = Math.max(0, Math.min(100, pct));
  span.style.width = wPct + '%';

  // teksti "W–L (P%)"
  val.textContent = `${w}–${l} (${Math.round(pct)}%)`;

  // sävy: vihreä kasvaa, punainen vähenee
  const gcol = Math.round(180 * (wPct/100));
  const rcol = Math.round(200 * (1 - wPct/100));
  span.style.background = `rgb(${rcol},${gcol},100)`;

  td.title = g ? `Wins: ${w}, Losses: ${l}, WR: ${pct.toFixed(1)}%` : 'No games';
}
function renderSplitWR(td, played, wrPct){
  const g = Math.max(0, parseInt(played || 0, 10));
  const pct = Math.max(0, Math.min(100, parseFloat((wrPct||0))));
  const wins = Math.round(g * pct / 100);
  const losses = Math.max(0, g - wins);

  td.innerHTML = '<div class="bar-split"><span class="win"></span><span class="loss"></span><div class="val"></div></div>';
  const win  = td.querySelector('.win');
  const loss = td.querySelector('.loss');
  const val  = td.querySelector('.val');

  win.style.width  = pct + '%';
  loss.style.left  = pct + '%';
  loss.style.width = (100 - pct) + '%';
  val.textContent  = (g ? `${wins}–${losses} (${Math.round(pct)}%)` : '0–0 (0%)');

  td.title = g ? `Wins: ${wins}, Losses: ${losses}, WR: ${pct.toFixed(1)}%` : 'No games';
}
document.addEventListener('DOMContentLoaded',()=>{ document.querySelectorAll('.tabs[id]').forEach(root=>initTabsAutoSort(root.id)); });
</script>
</head>
<body>

<div class="page">
<h1>5 Divisioona S11 <span class='muted'>(generoitu 2025-08-30 18:07)</span></h1>
<div class="nav">
</div>
<div class="div-summary">
<div class="card">
<h3>Division summary</h3>
<div class="summary-grid">
<div class="summary-item"><div class="label">Teams</div><div class="val">0</div></div>
<div class="summary-item"><div class="label">Players</div><div class="val">0</div></div>
<div class="summary-item"><div class="label">Maps</div><div class="val">0</div></div>
<div class="summary-item"><div class="label">Rounds</div><div class="val">0</div></div>
<div class="summary-item" title="Painotettu mediaani: pelaajakohtaiset arvot lajitellaan, paino = pelatut kierrokset divisioonassa. p50 on pienin arvo, jossa kumulatiiviset painot ylittävät 50% (p25/p75 vastaavasti 25%/75%).">  <div class="label">Median KD (p50)</div>  <div class="val">0.00</div>  <div class="label">p25-p75</div>  <span class="cell-muted" style="font-weight:400;">0.00-0.00</span></div>
<div class="summary-item" title="Painotettu mediaani: pelaajakohtaiset arvot lajitellaan, paino = pelatut kierrokset divisioonassa. p50 on pienin arvo, jossa kumulatiiviset painot ylittävät 50% (p25/p75 vastaavasti 25%/75%)."><div class="label">Median ADR (p50)</div><div class="val">0.0 <div class="label">p25-p75</div><span class="cell-muted" style="font-weight:400;">0.0-0.0</span></div></div>
<div class="summary-item" title="Painotettu mediaani: pelaajakohtaiset arvot lajitellaan, paino = pelatut kierrokset divisioonassa. p50 on pienin arvo, jossa kumulatiiviset painot ylittävät 50% (p25/p75 vastaavasti 25%/75%)."><div class="label">Median KR (p50)</div><div class="val">0.00 <div class="label">p25-p75</div><span class="cell-muted" style="font-weight:400;">0.00-0.00</span></div></div>
</div>
</div>
<div class="card leaders">
<h3>Leaders (min 20 rounds)</h3>
<table><thead><tr><th>Metric</th><th>Player</th><th>Value</th></tr></thead><tbody>
<tr><td>KD</td><td>- <span class="cell-muted">(-)</span></td><td>0.00</td></tr>
<tr><td>ADR</td><td>- <span class="cell-muted">(-)</span></td><td>0.0</td></tr>
<tr><td>KR</td><td>- <span class="cell-muted">(-)</span></td><td>0.00</td></tr>
</tbody></table>
</div>
</div>
<div class="muted">Vinkki: klikkaa joukkueen otsikkoriviä avataksesi tai sulkeaksesi sen.</div>
</div>

</body>
</html>
